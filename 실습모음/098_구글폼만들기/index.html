<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">

    <title>설문조사 내 힘으로 다시 만들기💪🏻</title>
</head>

<body>
    <form id="mainForm">
        <fieldset>
            <div class="title commonBox">
                <legend>부트캠프 만족도 설문조사</legend>
                <p class="titleTxt">직접 만든 만족도 설문조사 입니다🥸</p>
                <p class="notice">설문에 답해주세요!</p>
                <progress max="100" value="0" class="bar-progress"></progress>
            </div>
            <div class="commonBox">
                <label for="q1">성함이 어떻게 되시나요?</label>
                <input type="text" id="q1" required>
            </div>
            <div class="commonBox">
                <label for="q2">현재까지 학습한 것 중 가장 흥미로웠던 언어는 무엇인가요?</label>
                <input type="text" id="q2" required>
            </div>
            <div class="commonBox">
                <label for="q3">현재까지 학습한 것 중 가장 어려웠던 언어는 무엇인가요?</label>
                <input type="text" id="q3" required>
            </div>
            <div class="commonBox">
                <label for="q4">가장 인상 깊었던 특강은 무엇인가요?</label>
                <input type="text" id="q4" required>
            </div>
            <div class="commonBox">
                <label for="q5">남은 기간동안 어떤 마음가짐으로 교육에 임하고 싶으신가요?</label>
                <input type="text" id="q5" required>
            </div>

            <div class="btnWrapper">
                <button type="submit" class="btnSubmit">제출</button>
                <button type="reset" class="btnReset">양식 지우기</button>
            </div>
        </fieldset>
    </form>
    <script>
        const mainForm = document.querySelector("#mainForm");
        const progressBar = mainForm.querySelector(".bar-progress");
        const notice = mainForm.querySelector(".notice");
        const inputs = mainForm.querySelectorAll("input");
        const btnSubmit = mainForm.querySelector("button[type='submit']");
        const btnReset = mainForm.querySelector("button[type='reset']");

        // console.log(inputs) // input을 label 안으로 넣으니까 value 가 없는데도 valid가 true로 나오네
        mainForm.addEventListener("keyup", () => {

            const result = [...inputs].filter(item => {
                return item.validity.valid;
            })

            switch (result.length) {
                case 1:
                    notice.textContent = `계속 작성해주세요. ${result.length}개 완료 했습니다!`;
                    // progressBar.value += 10; // 이거는 왜 계속 늘어나는걸까?
                    progressBar.setAttribute("value", 20);
                    break;
                case 2:
                    notice.textContent = `잘 작성해주고 계시는군요! ${result.length}개 남았습니다`;
                    progressBar.setAttribute("value", 40);
                    break;
                case 3:
                    notice.textContent = `조금만 더 힘내서 작성해주세요🔥 ${result.length}개 남았습니다`;
                    progressBar.setAttribute("value", 60);
                    break;
                case 4:
                    notice.textContent = `거의 다하셨어요! ${result.length}개 남았습니다`;
                    progressBar.setAttribute("value", 80);
                    break;
                case 5:
                    notice.textContent = `모두 작성했습니다. 제출해주세요!`;
                    progressBar.setAttribute("value", 100);
                    break;
            }
        })

        btnSubmit.addEventListener("click", () => {
            let result = confirm("잘 작성하셨나요? 제출하시겠어요?🤓")

            if (result) {
                alert("제출되었습니다. 참여해주셔서 감사합니다!");
            }
        })

        btnReset.addEventListener("click", () => {
            let result = confirm("양식을 지우시겠습니까?");
        })
    </script>

</body>

</html>